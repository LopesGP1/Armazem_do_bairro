{% extends 'base.html' %}

{% block title %}Carrinho{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/carrinho.css') }}">
{% endblock %}

{% block content %}
<div class="carrinho-header">
    <a href="/cliente" class="btn-voltar">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        Continuar Comprando
    </a>

    <h1>Meu Carrinho</h1>
    <p class="carrinho-itens">{{ produtos|length }} itens no carrinho</p>
</div>

<main class="main-carrinho">
    <!-- Planilha de Produtos -->
    <section class="produtos">
        <h2>Produtos Selecionados</h2>

        <div class="colunas-titulo">
            <div>Produto</div>
            <div>Categoria</div>
            <div>Quantidade</div>
            <div>Preço</div>
            <div>Remover</div>
        </div>

        <div class="produto-lista">
            {% for produto in produtos %}
            <div class="colunas-conteudo" data-id="{{ produto.id_produto }}">
                <div class="produto-info">
                    <img src="{{ url_for('static', filename='img/produtos/' ~ produto.imagem.split('/')[-1]) }}"
                        alt="{{ produto.nome }}">
                    <span>{{ produto.nome }}</span>
                </div>
                <div>{{ produto.categoria }}</div>
                <div class="quantidade">
                    <button class="diminuir">-</button>
                    <span class="qtd">{{ produto.quantidade }}</span>
                    <button class="aumentar">+</button>
                </div>
                <div class="preco">R$ {{ '%.2f'|format(produto.preco_unitario) }}</div>
                <div class="remover">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="red" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M3 6h18v2H3V6zm2 3h14v12H5V9zm3 3v6h2v-6H8zm4 0v6h2v-6h-2z" />
                    </svg>
                </div>
            </div>
            {% endfor %}

        </div>
    </section>

    <!-- Resumo do Pedido -->
    <section class="resumo-pedido">
        <h2>Resumo do Pedido</h2>
        <p>Subtotal: <span id="subtotal">R$ 65,00</span></p>
        <p>Taxa de entrega: <span id="taxa">R$ 10,00</span></p>
        <p>Total: <span id="total">R$ 75,00</span></p>

        <button id="finalizar">Finalizar Compra</button>
        <button id="limpar">Limpar Carrinho</button>
    </section>
</main>
<div id="aviso-popup" style="display:none; position:fixed; top:50%; left:50%; 
    transform:translate(-50%, -50%);
    background:white; padding:20px; border-radius:8px; z-index:1001; min-width:250px; text-align:center; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
    <p>Opção em desenvolvimento!</p>
    <button id="fechar-aviso">Fechar</button>
</div>
<script src="{{ url_for('static', filename='js/carrinho.js') }}"></script>

{% endblock %}